<!--<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>sales</title>
</head>
<body>
    <h4>Welcome</h4>
</body>
</html>-->

<!DOCTYPE html>
<html>
<head>
    <title>jQuery Grid Bootstrap</title>
    <meta charset="utf-8" />

    <script src="../JavaScript/jquery.min.js"></script>
    <script src="../JavaScript/gijgo.min.js" type="text/javascript"></script>
    <script src="../JavaScript/bootstrap.bundle.min.js" type="text/javascript"></script>
    <script src="../JavaScript/salesdata.js" type="text/javascript"></script>

    <link href="../StyleSheet/gijgo.min.css" rel="stylesheet" type="text/css" />
    <link href="../StyleSheet/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet">
    <link href="../StyleSheet/Button.css" rel="stylesheet" type="text/css" />
    <link href="../StyleSheet/detailedtrack.css" rel="stylesheet" type="text/css" />
    <link href="../StyleSheet/font-awesome.min.css" rel="stylesheet" type="text/css" />

    <script src="../JavaScript/xlsx.min.js" type="text/javascript"></script>

    <style>
        html {
            margin: 0;
            font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
            font-size: 16px;
            font-weight: 400;
            line-height: 1.5;
            color: #212529;
            text-align: left;
            background-color: #fff;
        }
    </style>
</head>
<body>

    <div style="margin:5px">
        <button id="btntask1" class="button-33">Task 1</button>
        <button id="btntask2" class="button-33">Task 2</button>
    </div>

    <div style="margin: 7px; border: 1px solid; background: black;"></div>

    <div id="task1">
        <div class="container-full">
            <div class="row" style="margin-top: 10px">
                <div class="col-xs-8">
                    <form class="form-inline">
                        <div class="form-group">
                            <input id="txtName" type="text" placeholder="Product..." class="form-control" />
                        </div>
                        <button id="btnSearch" type="button" class="btn btn-default">Search</button>
                        <button id="btnClear" type="button" class="btn btn-default">Clear</button>
                    </form>
                </div>
            </div>
            <div class="row" style="margin-top: 10px">
                <div class="col-xs-12">
                    <table id="grid"></table>
                </div>
            </div>
        </div>
        <div>
            <label style="margin-left: 22px; margin-top: 15px; font-style: italic; font-family: initial; font-size: larger; color: crimson;">Please select order from list for tracking details </label>
        </div>
        <div id="detailedtrack" style="margin-top: -85px;">
            <div class="container px-1 px-md-4 py-5 mx-auto">
                <div class="card">
                    <div class="row d-flex justify-content-between px-3 top">
                        <div class="d-flex">
                            <h5>ORDER No : <span id="orderno" class="text-primary font-weight-bold">#Y34XDHR</span></h5>
                        </div>
                        <div class="d-flex flex-column text-sm-right">
                            <p class="mb-0">Expected Arrival : <span id="arrivedate">01/12/19</span></p>
                        </div>
                    </div>
                    <!-- Add class 'active' to progress -->
                    <div class="row d-flex justify-content-center">
                        <div class="col-12">
                            <ul id="progressbar" class="text-center">
                                <li id="st01" class="active step0"></li>
                                <li id="st02" class="active step0"></li>
                                <li id="st03" class="active step0"></li>
                                <li id="st04" class="step0"></li>
                            </ul>
                        </div>
                    </div>
                    <div class="row justify-content-between top">
                        <div class="row d-flex icon-content">
                            <img class="icon" src="https://i.imgur.com/9nnc9Et.png">
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Order<br>Processed</p>
                            </div>
                        </div>
                        <div class="row d-flex icon-content">
                            <img class="icon" src="https://i.imgur.com/u1AzR7w.png">
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Order<br>Shipped</p>
                            </div>
                        </div>
                        <div class="row d-flex icon-content">
                            <img class="icon" src="https://i.imgur.com/TkPm63y.png">
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Order<br>En Route</p>
                            </div>
                        </div>
                        <div class="row d-flex icon-content">
                            <img class="icon" src="https://i.imgur.com/HdsziHP.png">
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Order<br>Arrived</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="task2">

        <div style="margin-left: 20px;margin-top: 20px;">
            <input style="width: 240px;" type="file" id="file_upload" />
            <button class="button-33" onclick="upload()">Upload</button>
            <button id="btnsamplexcel" class="button-33" style="margin-left: 100px;">SamplExcel</button>
        </div>

        <div>
            <label style="margin-left: 22px; margin-top: 15px; font-style: italic; font-family: initial; font-size: larger; color: crimson;">Top 5 stores (max. sales - refresh in every 10 min)</label>
        </div>

        <div class="container-full">
            <div class="row" style="margin-top: 10px">
                <div class="col-xs-12">
                    <table id="grid2"></table>
                </div>
            </div>
        </div>


        <div id="dialog" title="jQuery Dialog" width="600" style="display:none">
            <div class="row" style="margin-top: 10px">
                <div class="col-xs-12">
                    <table id="sampleexcel"></table>
                </div>
            </div>
        </div>



    </div>

    <script type="text/javascript">
        var grid, grid2, excelsample;
        $('#detailedtrack').css('display', 'none');
        $(document).ready(function () {

            let data = get_order_details();

            grid = $('#grid').grid({
                primaryKey: 'OrderNo',
                dataSource: data,
                uiLibrary: 'bootstrap',
                columns: [
                    { field: 'OrderNo', width: 100 },
                    { field: 'Product', sortable: true },
                    { field: 'Quantity', title: 'Quantity', sortable: false },
                    { field: 'Status', title: 'Status', sortable: true }
                ],
                pager: { limit: 5 }
            });
            grid.on('rowSelect', function (e, $row, id, record) {
                detailedordertrack(record);
            });

            $('#btnSearch').on('click', function () {
                grid.reload({ Product: $('#txtName').val() });
            });
            $('#btnClear').on('click', function () {
                $('#txtName').val('');
                $('#txtPlaceOfBirth').val('');
                grid.reload({ Product: '' });
            });

            $('#btntask1').on('click', function () {
                $('#task1').css('display', '');
                $('#task2').css('display', 'none');
            });
            $('#btntask2').on('click', function () {
                $('#task1').css('display', 'none');
                $('#task2').css('display', '');
            });

            $('#btnClear').trigger('click');
            $('#btntask1').trigger('click');

            grid2 = $('#grid2').grid({
                primaryKey: 'StoreNo',
                dataSource: [],
                uiLibrary: 'bootstrap',
                columns: [
                    { field: 'StoreNo', width: 100 },
                    { field: 'StoreName', sortable: false },
                    { field: 'Branch', title: 'Branch', sortable: false },
                    { field: 'Amount', title: 'Amount(¥)', sortable: false }
                ]
            });

            /* Get records from web service in every 10 min - commented for now*/

            /* let min = 600000 // 600000 milisecoinds = 10 min
             const interval = setInterval(function () {
                 get_max_sale_data
             }, min); */

            let sampleexceldata = [
                { StoreNo: '21581', StoreName: 'ABC', Branch: 'abc', Amount: '56987' },
                { StoreNo: '21582', StoreName: 'XYZ', Branch: 'xyz', Amount: '658932' }
            ]

            excelsample = $('#sampleexcel').grid({
                primaryKey: 'StoreNo',
                dataSource: sampleexceldata,
                uiLibrary: 'bootstrap',
                columns: [
                    { field: 'StoreNo', width: 100 },
                    { field: 'StoreName', sortable: false },
                    { field: 'Branch', title: 'Branch', sortable: false },
                    { field: 'Amount', title: 'Amount(¥)', sortable: false }
                ]
            });

            $('#btnsamplexcel').on('click', function () {
                dialog = $("#dialog").dialog({
                    resizable: false,
                    modal: true,
                    title: 'Excel Format'
                });
            });

        });
    </script>
</body>
</html>